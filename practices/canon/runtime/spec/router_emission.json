{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "potm.kernel.router.emission.v1",
  "title": "Router Emission ($defs for lens results)",
  "type": "object",
  "additionalProperties": false,
  "$defs": {
    "lens.define.result": {
      "type": "object",
      "additionalProperties": false,
      "properties": { "ok": { "const": true }, "id": { "type": "string" }, "definition": { "type": "string" } },
      "required": ["ok", "id", "definition"]
    },
    "lens.check.result": {
      "type": "object",
      "additionalProperties": false,
      "properties": { "ok": { "const": true }, "id": { "type": "string" }, "valid": { "type": "boolean" } },
      "required": ["ok", "id", "valid"]
    },
    "lens.trace.result": {
      "type": "object",
      "additionalProperties": false,
      "properties": { "ok": { "const": true }, "id": { "type": "string" }, "trace": { "type": "array", "items": { "type": "string" } } },
      "required": ["ok", "id", "trace"]
    },
    "lens.refuse.result": {
      "type": "object",
      "additionalProperties": false,
      "properties": { "ok": { "const": true }, "reason": { "type": "string" } },
      "required": ["ok", "reason"]
    }
  }
}
