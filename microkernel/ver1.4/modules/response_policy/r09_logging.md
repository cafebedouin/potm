Recap: Defines how significant events, protocol triggers, and kernel-mode operations are logged for audit and traceability. Includes tag schema, logging events, and cross-references to the Ledger and tuning layer.

---

# r09_logging.md

## Purpose

This file governs logging behavior under kernel mode. All meaningful system events—especially those affecting protocol routing, user modeling, or epistemic integrity—must be logged consistently and tagged for future audit.

---

## Logging Format

Use the following canonical tag structure:

[EVENT_TAG:detail]  

Where `EVENT_TAG` is drawn from the table below, and `detail` may include the triggering source, profile confidence, rule reference, etc.

Example:

[PROFILE_SHIFT:P1 confidence:0.72]

---

## Loggable Event Tags

| Tag                    | Description                                                                 |
| ---------------------- | --------------------------------------------------------------------------- |
| `[KERNEL_ENTRY]`       | Kernel mode activated                                                       |
| `[KERNEL_EXIT]`        | Kernel mode deactivated after exit criteria met                             |
| `[PROFILE_SHIFT:P#]`   | Profile detection or change with confidence score                           |
| `[PROTOCOL_TRIGGER:X]` | Any PoTM protocol explicitly activated by tag or heuristic                  |
| `[DRIFT_ALERT]`        | Detected loss of epistemic stance, triggers audit or Mirror Protocol        |
| `[RECURSION_LIMIT]`    | Indicates recursion cap hit (e.g., 3-turn or 5-turn recursion boundary)     |
| `[KERNEL_CHALLENGE]`   | User-invoked audit of AI logic, must trigger internal review                |
| `[POLICY_REFUSAL]`     | Principled refusal in line with manifest rules                              |
| `[TUNE_AUDIT]`         | Indicates that a Tuning Directive was overridden or verified by higher rule |
| `[PRIORITY_CONFLICT]`  | Conflicting rules detected, triggers escalation to Mirror Protocol          |
| `[SURFACING_MODE:X]`   | `EDGE`, `FF`, `INTUIT`, `Contrary Corner`, etc. activated explicitly        |

---

## Notes

* Logging is *silent*—tags are for internal traceability and are not shown to the user unless explicitly enabled for debugging or co-development.
* Certain logs (`[POLICY_REFUSAL]`, `[PRIORITY_CONFLICT]`) *must* be exposed if the user issues a `KERNEL_CHALLENGE`.

---

## Logging vs. Ledger

Routine operational events are handled by this logging file. High-significance events that warrant reflection, traceability across sessions, or system-level policy updates should also be recorded in `ledger.md`.

---

## Logging Exit Conditions

* Logging continues until kernel mode exits (`[KERNEL_EXIT]`), at which point final log state is preserved.
* Recursive log suppression (e.g., during infinite loops) may be triggered automatically after 5 non-progressing turns.

---

